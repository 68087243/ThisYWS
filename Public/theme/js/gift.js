function getallgames(){var a=[],e=$("#w-allgames li");return e.each(function(e){a[e]=[];var t=$(this).data("main"),s=t.split("|");a[e][0]=s[0],a[e][1]=s[1],a[e][2]=s[2],a[e][3]=s[3],a[e][4]=$(this).find("a").attr("href"),a[e][5]=$(this).find("a").text()}),a}function SortGame(){var a=[],e=[];if(0!=selectAry[0])for(var t=0;allnum>t;t++)allgames[t][1]==selectAry[0]&&a.push(allgames[t]);else a=allgames;if(0!=selectAry[1]){for(var t=0;t<a.length;t++)-1!=selectAry[1].toString().indexOf(a[t][0])&&e.push(a[t]);a=e}if(0!=selectAry[2]){e=[];for(var t=0;t<a.length;t++)a[t][3]==selectAry[2]&&e.push(a[t]);a=e}if(searsat){var s=$("#searchTxt").val();e=[];for(var t=0;allnum>t;t++)-1!=allgames[t][5].indexOf(s)&&e.push(allgames[t]);a=e}if(tablestart=a.length!=allnum?!0:!1){e=[];for(var l=0,r="abcdefghijklmnopqrstuvwxyz".split(""),o=r.length;o>l;l++)for(var t=0;t<a.length;t++)-1!=r[l].indexOf(a[t][0])&&e.push(a[t]);a=e}return 0==a.length?$("#w-con-none").show():$("#w-con-none").hide(),total=a.length,totalpage=Math.ceil(total/pagesize),1>totalpage&&(totalpage=1),a}function jpage(a,e,t){if(!(2>a)){t||(t=4);var s=e-t,l=e+t;e>a-t&&(s=a-2*t+1),1>s&&(s=1),t>e&&(l=2*t),l>a&&(l=a);var r=[];e>1&&r.push('<a target="_self" class="page-prev-w" href="#第'+(e-1)+'页" onclick="gotopage('+(e-1)+',1);return false;"><</a>'),e-t>1&&s>1&&(r.push('<a href="#第1页" onclick="gotopage(1,1);return false;">1</a>'),s>2&&r.push("<span>...</span>"));for(var o=s;l>=o;o++)r.push(o!=e?'<a target="_self" href="#第'+o+'页" onclick="gotopage('+o+',1);return false;">'+o+"</a>":'<strong title="当前第 '+e+' 页">'+e+"</strong>");return a>l&&(a-l>1&&r.push("<span>...</span>"),r.push('<a href="#第'+a+'页" onclick="gotopage('+a+',1);return false;">'+a+"</a>")),a>e&&r.push('<a target="_self" class="page-next-w" href="#第'+(e+1)+'页" onclick="gotopage('+(e+1)+',1);return false;">></a>'),r.join("")}}function gotopage(a,e){page=a;var t=(a-1)*pagesize,s=t+pagesize;s>total&&(s=total);for(var l=[],r=SortGame(),o=t;s>o;o++)l.push('<li><div class="w-agamescon"><a href="'+r[o][4]+'" class="w-agamescon-a"><img src="'+r[o][2]+'" alt=""></a><div class="w-jqyxb"><a href="'+r[o][4]+'" class="w-jqyxplay w-jqyxlq">立即领取</a><a href="'+r[o][4]+'">'+r[o][5]+'</a></div></div><i class="w-agamesbg"></i></li>');initpage(),$("#w-allgames").html(l.join("")),e&&window.scrollTo(0,$(".w-paixu").offset().top)}function initpage(){return 2>totalpage?void $("#ztpage").hide():void $("#ztpage").html(jpage(totalpage,page)).show()}var page=1,pagesize=24,total=0,totalpage=0,selectAry=[0,0,0,0,0,0,0],tablestart=!1,searsat=!1,allgames=getallgames(),allnum=allgames.length;SortGame(),initpage(),gotopage(1);var hotKeyContainer=$("#class-key-w span"),initialKeyContainer=$("#initial-key-w span"),tagKeyContainer=$("#tag-key-w span");hotKeyContainer.click(function(){$(this).addClass("cur").siblings().removeClass("cur");var a=$(this).text();selectAry[0]="不限"!=a?a:0,SortGame(),initpage(),gotopage(1),dropBar(),scrollFun()}),initialKeyContainer.click(function(){$(this).addClass("cur").siblings().removeClass("cur");var a=$(this).text();selectAry[1]="不限"!=a?a.toLowerCase().split(""):0,SortGame(),initpage(),gotopage(1),dropBar(),scrollFun()}),tagKeyContainer.click(function(){$(this).addClass("cur").siblings().removeClass("cur");var a=$(this).text();selectAry[2]="不限"!=a?a:0,SortGame(),initpage(),gotopage(1),dropBar(),scrollFun()}),$("#searchG").click(function(){var a=$("#searchTxt").val();/^\s*$/.test(a)||(searsat=!0,SortGame(),initpage(),gotopage(1),searsat=!1)});var scrollFun=function(){var a=$("#gifts_nav"),e=a.offset().top,t=document.documentElement.scrollTop||document.body.scrollTop,s=$(".w-nav-sort");t>e?s.addClass("nav_fixed"):s.removeClass("nav_fixed")},dropBar=function(){$("html, body").animate({scrollTop:$("#gifts_nav").offset().top},{duration:300,easing:"swing"})};$(window).bind("scroll",scrollFun);